<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pengisian Vendor Outsource</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: 'Arial', sans-serif;
            background-color: #f8f9fa;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            padding: 20px;
            margin: 0;
        }

        .container {
            width: 100%;
            max-width: 1200px; /* Maksimal lebar kontainer */
            background-color: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0px 4px 6px rgba(0, 0, 0, 0.1);
            overflow: hidden; /* Menyembunyikan elemen yang meluap */
        }

        h2 {
            text-align: center;
            font-size: 24px;
            color: #333;
            margin-bottom: 20px;
        }

        .table-wrapper {
            max-height: 500px;
            overflow-y: auto; /* Menambahkan scrollbar vertikal */
        }

        table {
            width: 100%;
            border-collapse: collapse;
        }

        th, td {
            padding: 12px;
            text-align: left;
            border: 1px solid #ddd;
        }

        th {
            background-color: #007bff;
            color: white;
        }

        tr:nth-child(even) {
            background-color: #f2f2f2;
        }

        tr:hover {
            background-color: #e9ecef;
        }

        .action-buttons {
            margin-top: 20px;
            text-align: center;
        }

        button {
            padding: 10px 20px;
            margin: 5px;
            background-color: #007bff;
            border: none;
            border-radius: 5px;
            color: white;
            cursor: pointer;
            font-size: 16px;
        }

        button:hover {
            background-color: #0056b3;
        }

        .form-container {
            display: none;
            background-color: white;
            padding: 20px;
            margin-top: 20px;
            border-radius: 8px;
            box-shadow: 0px 4px 6px rgba(0, 0, 0, 0.1);
        }

        .form-container.active {
            display: block;
        }

        .form-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);  /* Menyesuaikan dengan jumlah kolom */
            gap: 15px;
            margin-bottom: 20px;
        }

        .form-grid input, .form-grid select {
            padding: 10px;
            margin: 5px 0;
            width: 100%;
            border: 1px solid #ccc;
            border-radius: 5px;
        }

        .form-container button[type="submit"] {
            width: 100%;
            background-color: #28a745;
        }

        .form-container button[type="submit"]:hover {
            background-color: #218838;
        }

        .form-container button[type="button"] {
            background-color: #dc3545;
        }

        .form-container button[type="button"]:hover {
            background-color: #c82333;
        }

        @media (max-width: 768px) {
            .form-grid {
                grid-template-columns: 1fr 1fr; /* 2 kolom untuk tampilan mobile */
            }
        }

        @media (max-width: 480px) {
            .form-grid {
                grid-template-columns: 1fr; /* 1 kolom untuk layar kecil */
            }
        }

    </style>
</head>
<body>

    <div class="container">
        <h2>Pengisian Vendor Outsource</h2>

        <div class="table-wrapper">
            <table id="employee-table">
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>Nama</th>
                        <th>Email</th>
                        <th>Usia</th>
                        <th>Posisi</th>
                        <th>Divisi</th>
                        <th>Telepon</th>
                        <th>Gaji</th>
                        <th>Mulai Kerja</th>
                        <th>Jenis Kelamin</th>
                        <th>Status</th>
                        <th>Lokasi</th>
                        <th>Pendidikan</th>
                        <th>Pengalaman</th>
                        <th>Skill</th>
                        <th>Hobi</th>
                        <th>Negara</th>
                        <th>Kota</th>
                        <th>Kontak Darurat</th>
                        <th>Aksi</th>
                    </tr>
                </thead>
                <tbody>
                    <!-- Data dinamis akan diisi menggunakan JavaScript -->
                </tbody>
            </table>
        </div>

        <div class="action-buttons">
            <button onclick="showForm()">Tambah Karyawan</button>
        </div>

        <div id="form-container" class="form-container">
            <h3 id="form-title">Tambah Karyawan</h3>
            <form id="employee-form">
                <input type="hidden" id="employee-id" value="">
                <div class="form-grid">
                    <input type="text" id="name" placeholder="Nama" required>
                    <input type="email" id="email" placeholder="Email" required>
                    <input type="number" id="age" placeholder="Usia" required>
                    <input type="text" id="address" placeholder="Alamat" required>
                    <input type="text" id="position" placeholder="Posisi" required>
                    <input type="text" id="division" placeholder="Divisi" required>
                    <input type="text" id="phone" placeholder="Telepon" required>
                    <input type="number" id="salary" placeholder="Gaji" required>
                    <input type="date" id="start-date" placeholder="Mulai Kerja" required>
                    <select id="gender" required>
                        <option value="">Jenis Kelamin</option>
                        <option value="Male">Pria</option>
                        <option value="Female">Wanita</option>
                    </select>
                    <select id="status" required>
                        <option value="">Status</option>
                        <option value="Active">Aktif</option>
                        <option value="Inactive">Tidak Aktif</option>
                    </select>
                    <input type="text" id="location" placeholder="Lokasi" required>
                    <input type="text" id="education" placeholder="Pendidikan" required>
                    <input type="text" id="experience" placeholder="Pengalaman" required>
                    <input type="text" id="skills" placeholder="Skills" required>
                    <input type="text" id="hobbies" placeholder="Hobi" required>
                    <input type="text" id="country" placeholder="Negara" required>
                    <input type="text" id="city" placeholder="Kota" required>
                    <input type="text" id="emergency-contact" placeholder="Kontak Darurat" required>
                </div>
                <button type="submit">Simpan</button>
            </form>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            fetchEmployees();

            document.getElementById('employee-form').addEventListener('submit', function(event) {
                event.preventDefault();
                const employee = {
                    name: document.getElementById('name').value,
                    email: document.getElementById('email').value,
                    age: document.getElementById('age').value,
                    address: document.getElementById('address').value,
                    position: document.getElementById('position').value,
                    division: document.getElementById('division').value,
                    phone: document.getElementById('phone').value,
                    salary: document.getElementById('salary').value,
                    startDate: document.getElementById('start-date').value,
                    gender: document.getElementById('gender').value,
                    status: document.getElementById('status').value,
                    location: document.getElementById('location').value,
                    education: document.getElementById('education').value,
                    experience: document.getElementById('experience').value,
                    skills: document.getElementById('skills').value,
                    hobbies: document.getElementById('hobbies').value,
                    country: document.getElementById('country').value,
                    city: document.getElementById('city').value,
                    emergencyContact: document.getElementById('emergency-contact').value
                };

                const employeeId = document.getElementById('employee-id').value;

                if (employeeId) {
                    updateEmployee(employeeId, employee);
                } else {
                    addEmployee(employee);
                }
            });
        });

        function showForm() {
            document.getElementById('form-container').classList.add('active');
            document.getElementById('form-title').textContent = 'Tambah Karyawan';
            document.getElementById('employee-id').value = '';
            document.getElementById('employee-form').reset();
        }

        function fetchEmployees() {
            fetch('/api/employees') // Pastikan API Anda aktif dan berjalan
                .then(response => response.json())
                .then(data => {
                    // Mengurutkan data berdasarkan ID dari terkecil ke terbesar
                    data.sort((a, b) => a.id - b.id);

                    const tbody = document.querySelector('#employee-table tbody');
                    tbody.innerHTML = ''; // Menghapus isi tabel sebelum menambah data baru

                    // Menambahkan baris ke dalam tabel
                    data.forEach((employee) => {
                        const row = document.createElement('tr');
                        row.innerHTML = `
                            <td>${employee.id}</td>
                            <td>${employee.name}</td>
                            <td>${employee.email}</td>
                            <td>${employee.age}</td>
                            <td>${employee.position}</td>
                            <td>${employee.division}</td>
                            <td>${employee.phone}</td>
                            <td>${employee.salary}</td>
                            <td>${employee.startDate}</td>
                            <td>${employee.gender}</td>
                            <td>${employee.status}</td>
                            <td>${employee.location}</td>
                            <td>${employee.education}</td>
                            <td>${employee.experience}</td>
                            <td>${employee.skills}</td>
                            <td>${employee.hobbies}</td>
                            <td>${employee.country}</td>
                            <td>${employee.city}</td>
                            <td>${employee.emergencyContact}</td>
                            <td>
                                <button onclick="editEmployee(${employee.id})">Edit</button>
                                <button onclick="deleteEmployee(${employee.id})">Delete</button>
                            </td>
                        `;
                        tbody.appendChild(row);
                    });
                });
        }

        function editEmployee(id) {
            fetch(`/api/employees/${id}`)
                .then(response => response.json())
                .then(employee => {
                    document.getElementById('form-container').classList.add('active');
                    document.getElementById('form-title').textContent = 'Edit Karyawan';
                    document.getElementById('employee-id').value = employee.id;
                    document.getElementById('name').value = employee.name;
                    document.getElementById('email').value = employee.email;
                    document.getElementById('age').value = employee.age;
                    document.getElementById('address').value = employee.address;
                    document.getElementById('position').value = employee.position;
                    document.getElementById('division').value = employee.division;
                    document.getElementById('phone').value = employee.phone;
                    document.getElementById('salary').value = employee.salary;
                    document.getElementById('start-date').value = employee.startDate;
                    document.getElementById('gender').value = employee.gender;
                    document.getElementById('status').value = employee.status;
                    document.getElementById('location').value = employee.location;
                    document.getElementById('education').value = employee.education;
                    document.getElementById('experience').value = employee.experience;
                    document.getElementById('skills').value = employee.skills;
                    document.getElementById('hobbies').value = employee.hobbies;
                    document.getElementById('country').value = employee.country;
                    document.getElementById('city').value = employee.city;
                    document.getElementById('emergency-contact').value = employee.emergencyContact;
                });
        }

        function addEmployee(employee) {
            fetch('/api/employees', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify(employee),
            })
            .then(response => response.json())
            .then(data => {
                fetchEmployees(); // Reload employee list
                document.getElementById('form-container').classList.remove('active');
            });
        }

        function updateEmployee(id, employee) {
            fetch(`/api/employees/${id}`, {
                method: 'PUT',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify(employee),
            })
            .then(response => response.json())
            .then(data => {
                fetchEmployees(); // Reload employee list
                document.getElementById('form-container').classList.remove('active');
            });
        }

        function deleteEmployee(id) {
            if (confirm('Are you sure you want to delete this employee?')) {
                fetch(`/api/employees/${id}`, {
                    method: 'DELETE',
                })
                .then(() => {
                    fetchEmployees(); // Reload employee list
                });
            }
        }
    </script>

</body>
</html>
